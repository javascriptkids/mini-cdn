{"version":3,"file":"adhan.umd.min.js","sources":["../../src/Madhab.ts","../../src/HighLatitudeRule.ts","../../src/Coordinates.ts","../../src/Rounding.ts","../../src/DateUtils.ts","../../src/MathUtils.ts","../../src/Shafaq.ts","../../src/Astronomical.ts","../../src/SolarCoordinates.ts","../../src/SolarTime.ts","../../src/PolarCircleResolution.ts","../../src/CalculationParameters.ts","../../src/CalculationMethod.ts","../../src/Prayer.ts","../../src/TimeComponents.ts","../../src/PrayerTimes.ts","../../src/SunnahTimes.ts","../../src/Qibla.ts"],"sourcesContent":["import { ValueOf } from './TypeUtils';\n\nexport const Madhab = {\n  Shafi: 'shafi',\n  Hanafi: 'hanafi',\n} as const;\n\nexport function shadowLength(madhab: ValueOf<typeof Madhab>) {\n  switch (madhab) {\n    case Madhab.Shafi:\n      return 1;\n    case Madhab.Hanafi:\n      return 2;\n    default:\n      throw 'Invalid Madhab';\n  }\n}\n","import type Coordinates from './Coordinates';\n\nconst HighLatitudeRule = {\n  MiddleOfTheNight: 'middleofthenight',\n  SeventhOfTheNight: 'seventhofthenight',\n  TwilightAngle: 'twilightangle',\n\n  recommended(coordinates: Coordinates) {\n    if (coordinates.latitude > 48) {\n      return HighLatitudeRule.SeventhOfTheNight;\n    } else {\n      return HighLatitudeRule.MiddleOfTheNight;\n    }\n  },\n} as const;\n\nexport default HighLatitudeRule;\n","export default class Coordinates {\n  constructor(public latitude: number, public longitude: number) {}\n}\n","export const Rounding = {\n  Nearest: 'nearest',\n  Up: 'up',\n  None: 'none',\n} as const;\n","import Astronomical from './Astronomical';\nimport { Rounding } from './Rounding';\nimport { ValueOf } from './TypeUtils';\n\nexport function dateByAddingDays(date: Date, days: number) {\n  const year = date.getFullYear();\n  const month = date.getMonth();\n  const day = date.getDate() + days;\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n  return new Date(year, month, day, hours, minutes, seconds);\n}\n\nexport function dateByAddingMinutes(date: Date, minutes: number) {\n  return dateByAddingSeconds(date, minutes * 60);\n}\n\nexport function dateByAddingSeconds(date: Date, seconds: number) {\n  return new Date(date.getTime() + seconds * 1000);\n}\n\nexport function roundedMinute(\n  date: Date,\n  rounding: ValueOf<typeof Rounding> = Rounding.Nearest,\n) {\n  const seconds = date.getUTCSeconds();\n  let offset = seconds >= 30 ? 60 - seconds : -1 * seconds;\n  if (rounding === Rounding.Up) {\n    offset = 60 - seconds;\n  } else if (rounding === Rounding.None) {\n    offset = 0;\n  }\n\n  return dateByAddingSeconds(date, offset);\n}\n\nexport function dayOfYear(date: Date) {\n  let returnedDayOfYear = 0;\n  const feb = Astronomical.isLeapYear(date.getFullYear()) ? 29 : 28;\n  const months = [31, feb, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n  for (let i = 0; i < date.getMonth(); i++) {\n    returnedDayOfYear += months[i];\n  }\n\n  returnedDayOfYear += date.getDate();\n\n  return returnedDayOfYear;\n}\n\nexport function isValidDate(date: Date) {\n  return date instanceof Date && !isNaN(date.valueOf());\n}\n","export function degreesToRadians(degrees: number) {\n  return (degrees * Math.PI) / 180.0;\n}\n\nexport function radiansToDegrees(radians: number) {\n  return (radians * 180.0) / Math.PI;\n}\n\nexport function normalizeToScale(num: number, max: number) {\n  return num - max * Math.floor(num / max);\n}\n\nexport function unwindAngle(angle: number) {\n  return normalizeToScale(angle, 360.0);\n}\n\nexport function quadrantShiftAngle(angle: number) {\n  if (angle >= -180 && angle <= 180) {\n    return angle;\n  }\n\n  return angle - 360 * Math.round(angle / 360);\n}\n","// Shafaq is the twilight in the sky. Different madhabs define the appearance of\n// twilight differently. These values are used by the MoonsightingComittee method\n// for the different ways to calculate Isha.\nexport const Shafaq = {\n  // General is a combination of Ahmer and Abyad.\n  General: 'general',\n\n  // Ahmer means the twilight is the red glow in the sky. Used by the Shafi, Maliki, and Hanbali madhabs.\n  Ahmer: 'ahmer',\n\n  // Abyad means the twilight is the white glow in the sky. Used by the Hanafi madhab.\n  Abyad: 'abyad',\n} as const;\n","/* eslint-disable max-params, max-lines */\nimport Coordinates from './Coordinates';\nimport { dateByAddingSeconds } from './DateUtils';\nimport {\n  degreesToRadians,\n  normalizeToScale,\n  quadrantShiftAngle,\n  radiansToDegrees,\n  unwindAngle,\n} from './MathUtils';\nimport { Shafaq } from './Shafaq';\nimport { ValueOf } from './TypeUtils';\n\nconst Astronomical = {\n  /* The geometric mean longitude of the sun in degrees. */\n  meanSolarLongitude(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 163 */\n    const term1 = 280.4664567;\n    const term2 = 36000.76983 * T;\n    const term3 = 0.0003032 * Math.pow(T, 2);\n    const L0 = term1 + term2 + term3;\n    return unwindAngle(L0);\n  },\n\n  /* The geometric mean longitude of the moon in degrees. */\n  meanLunarLongitude(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 144 */\n    const term1 = 218.3165;\n    const term2 = 481267.8813 * T;\n    const Lp = term1 + term2;\n    return unwindAngle(Lp);\n  },\n\n  ascendingLunarNodeLongitude(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 144 */\n    const term1 = 125.04452;\n    const term2 = 1934.136261 * T;\n    const term3 = 0.0020708 * Math.pow(T, 2);\n    const term4 = Math.pow(T, 3) / 450000;\n    const Omega = term1 - term2 + term3 + term4;\n    return unwindAngle(Omega);\n  },\n\n  /* The mean anomaly of the sun. */\n  meanSolarAnomaly(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 163 */\n    const term1 = 357.52911;\n    const term2 = 35999.05029 * T;\n    const term3 = 0.0001537 * Math.pow(T, 2);\n    const M = term1 + term2 - term3;\n    return unwindAngle(M);\n  },\n\n  /* The Sun's equation of the center in degrees. */\n  solarEquationOfTheCenter(julianCentury: number, meanAnomaly: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 164 */\n    const Mrad = degreesToRadians(meanAnomaly);\n    const term1 =\n      (1.914602 - 0.004817 * T - 0.000014 * Math.pow(T, 2)) * Math.sin(Mrad);\n    const term2 = (0.019993 - 0.000101 * T) * Math.sin(2 * Mrad);\n    const term3 = 0.000289 * Math.sin(3 * Mrad);\n    return term1 + term2 + term3;\n  },\n\n  /* The apparent longitude of the Sun, referred to the\n        true equinox of the date. */\n  apparentSolarLongitude(julianCentury: number, meanLongitude: number) {\n    const T = julianCentury;\n    const L0 = meanLongitude;\n    /* Equation from Astronomical Algorithms page 164 */\n    const longitude =\n      L0 +\n      Astronomical.solarEquationOfTheCenter(\n        T,\n        Astronomical.meanSolarAnomaly(T),\n      );\n    const Omega = 125.04 - 1934.136 * T;\n    const Lambda =\n      longitude - 0.00569 - 0.00478 * Math.sin(degreesToRadians(Omega));\n    return unwindAngle(Lambda);\n  },\n\n  /* The mean obliquity of the ecliptic, formula\n        adopted by the International Astronomical Union.\n        Represented in degrees. */\n  meanObliquityOfTheEcliptic(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 147 */\n    const term1 = 23.439291;\n    const term2 = 0.013004167 * T;\n    const term3 = 0.0000001639 * Math.pow(T, 2);\n    const term4 = 0.0000005036 * Math.pow(T, 3);\n    return term1 - term2 - term3 + term4;\n  },\n\n  /* The mean obliquity of the ecliptic, corrected for\n        calculating the apparent position of the sun, in degrees. */\n  apparentObliquityOfTheEcliptic(\n    julianCentury: number,\n    meanObliquityOfTheEcliptic: number,\n  ) {\n    const T = julianCentury;\n    const Epsilon0 = meanObliquityOfTheEcliptic;\n    /* Equation from Astronomical Algorithms page 165 */\n    const O = 125.04 - 1934.136 * T;\n    return Epsilon0 + 0.00256 * Math.cos(degreesToRadians(O));\n  },\n\n  /* Mean sidereal time, the hour angle of the vernal equinox, in degrees. */\n  meanSiderealTime(julianCentury: number) {\n    const T = julianCentury;\n    /* Equation from Astronomical Algorithms page 165 */\n    const JD = T * 36525 + 2451545.0;\n    const term1 = 280.46061837;\n    const term2 = 360.98564736629 * (JD - 2451545);\n    const term3 = 0.000387933 * Math.pow(T, 2);\n    const term4 = Math.pow(T, 3) / 38710000;\n    const Theta = term1 + term2 + term3 - term4;\n    return unwindAngle(Theta);\n  },\n\n  nutationInLongitude(\n    julianCentury: number,\n    solarLongitude: number,\n    lunarLongitude: number,\n    ascendingNode: number,\n  ) {\n    const L0 = solarLongitude;\n    const Lp = lunarLongitude;\n    const Omega = ascendingNode;\n    /* Equation from Astronomical Algorithms page 144 */\n    const term1 = (-17.2 / 3600) * Math.sin(degreesToRadians(Omega));\n    const term2 = (1.32 / 3600) * Math.sin(2 * degreesToRadians(L0));\n    const term3 = (0.23 / 3600) * Math.sin(2 * degreesToRadians(Lp));\n    const term4 = (0.21 / 3600) * Math.sin(2 * degreesToRadians(Omega));\n    return term1 - term2 - term3 + term4;\n  },\n\n  nutationInObliquity(\n    julianCentury: number,\n    solarLongitude: number,\n    lunarLongitude: number,\n    ascendingNode: number,\n  ) {\n    const L0 = solarLongitude;\n    const Lp = lunarLongitude;\n    const Omega = ascendingNode;\n    /* Equation from Astronomical Algorithms page 144 */\n    const term1 = (9.2 / 3600) * Math.cos(degreesToRadians(Omega));\n    const term2 = (0.57 / 3600) * Math.cos(2 * degreesToRadians(L0));\n    const term3 = (0.1 / 3600) * Math.cos(2 * degreesToRadians(Lp));\n    const term4 = (0.09 / 3600) * Math.cos(2 * degreesToRadians(Omega));\n    return term1 + term2 + term3 - term4;\n  },\n\n  altitudeOfCelestialBody(\n    observerLatitude: number,\n    declination: number,\n    localHourAngle: number,\n  ) {\n    const Phi = observerLatitude;\n    const delta = declination;\n    const H = localHourAngle;\n    /* Equation from Astronomical Algorithms page 93 */\n    const term1 =\n      Math.sin(degreesToRadians(Phi)) * Math.sin(degreesToRadians(delta));\n    const term2 =\n      Math.cos(degreesToRadians(Phi)) *\n      Math.cos(degreesToRadians(delta)) *\n      Math.cos(degreesToRadians(H));\n    return radiansToDegrees(Math.asin(term1 + term2));\n  },\n\n  approximateTransit(\n    longitude: number,\n    siderealTime: number,\n    rightAscension: number,\n  ) {\n    const L = longitude;\n    const Theta0 = siderealTime;\n    const a2 = rightAscension;\n    /* Equation from page Astronomical Algorithms 102 */\n    const Lw = L * -1;\n    return normalizeToScale((a2 + Lw - Theta0) / 360, 1);\n  },\n\n  /* The time at which the sun is at its highest point in the sky (in universal time) */\n  correctedTransit(\n    approximateTransit: number,\n    longitude: number,\n    siderealTime: number,\n    rightAscension: number,\n    previousRightAscension: number,\n    nextRightAscension: number,\n  ) {\n    const m0 = approximateTransit;\n    const L = longitude;\n    const Theta0 = siderealTime;\n    const a2 = rightAscension;\n    const a1 = previousRightAscension;\n    const a3 = nextRightAscension;\n    /* Equation from page Astronomical Algorithms 102 */\n    const Lw = L * -1;\n    const Theta = unwindAngle(Theta0 + 360.985647 * m0);\n    const a = unwindAngle(Astronomical.interpolateAngles(a2, a1, a3, m0));\n    const H = quadrantShiftAngle(Theta - Lw - a);\n    const dm = H / -360;\n    return (m0 + dm) * 24;\n  },\n\n  correctedHourAngle(\n    approximateTransit: number,\n    angle: number,\n    coordinates: Coordinates,\n    afterTransit: boolean,\n    siderealTime: number,\n    rightAscension: number,\n    previousRightAscension: number,\n    nextRightAscension: number,\n    declination: number,\n    previousDeclination: number,\n    nextDeclination: number,\n  ) {\n    const m0 = approximateTransit;\n    const h0 = angle;\n    const Theta0 = siderealTime;\n    const a2 = rightAscension;\n    const a1 = previousRightAscension;\n    const a3 = nextRightAscension;\n    const d2 = declination;\n    const d1 = previousDeclination;\n    const d3 = nextDeclination;\n\n    /* Equation from page Astronomical Algorithms 102 */\n    const Lw = coordinates.longitude * -1;\n    const term1 =\n      Math.sin(degreesToRadians(h0)) -\n      Math.sin(degreesToRadians(coordinates.latitude)) *\n        Math.sin(degreesToRadians(d2));\n    const term2 =\n      Math.cos(degreesToRadians(coordinates.latitude)) *\n      Math.cos(degreesToRadians(d2));\n    const H0 = radiansToDegrees(Math.acos(term1 / term2));\n    const m = afterTransit ? m0 + H0 / 360 : m0 - H0 / 360;\n    const Theta = unwindAngle(Theta0 + 360.985647 * m);\n    const a = unwindAngle(Astronomical.interpolateAngles(a2, a1, a3, m));\n    const delta = Astronomical.interpolate(d2, d1, d3, m);\n    const H = Theta - Lw - a;\n    const h = Astronomical.altitudeOfCelestialBody(\n      coordinates.latitude,\n      delta,\n      H,\n    );\n    const term3 = h - h0;\n    const term4 =\n      360 *\n      Math.cos(degreesToRadians(delta)) *\n      Math.cos(degreesToRadians(coordinates.latitude)) *\n      Math.sin(degreesToRadians(H));\n    const dm = term3 / term4;\n    return (m + dm) * 24;\n  },\n\n  /* Interpolation of a value given equidistant\n        previous and next values and a factor\n        equal to the fraction of the interpolated\n        point's time over the time between values. */\n  interpolate(y2: number, y1: number, y3: number, n: number) {\n    /* Equation from Astronomical Algorithms page 24 */\n    const a = y2 - y1;\n    const b = y3 - y2;\n    const c = b - a;\n    return y2 + (n / 2) * (a + b + n * c);\n  },\n\n  /* Interpolation of three angles, accounting for\n        angle unwinding. */\n  interpolateAngles(y2: number, y1: number, y3: number, n: number) {\n    /* Equation from Astronomical Algorithms page 24 */\n    const a = unwindAngle(y2 - y1);\n    const b = unwindAngle(y3 - y2);\n    const c = b - a;\n    return y2 + (n / 2) * (a + b + n * c);\n  },\n\n  /* The Julian Day for the given Gregorian date components. */\n  julianDay(year: number, month: number, day: number, hours = 0) {\n    /* Equation from Astronomical Algorithms page 60 */\n\n    const trunc = Math.trunc;\n\n    const Y = trunc(month > 2 ? year : year - 1);\n    const M = trunc(month > 2 ? month : month + 12);\n    const D = day + hours / 24;\n\n    const A = trunc(Y / 100);\n    const B = trunc(2 - A + trunc(A / 4));\n\n    const i0 = trunc(365.25 * (Y + 4716));\n    const i1 = trunc(30.6001 * (M + 1));\n\n    return i0 + i1 + D + B - 1524.5;\n  },\n\n  /* Julian century from the epoch. */\n  julianCentury(julianDay: number) {\n    /* Equation from Astronomical Algorithms page 163 */\n    return (julianDay - 2451545.0) / 36525;\n  },\n\n  /* Whether or not a year is a leap year (has 366 days). */\n  isLeapYear(year: number) {\n    if (year % 4 !== 0) {\n      return false;\n    }\n\n    if (year % 100 === 0 && year % 400 !== 0) {\n      return false;\n    }\n\n    return true;\n  },\n\n  seasonAdjustedMorningTwilight(\n    latitude: number,\n    dayOfYear: number,\n    year: number,\n    sunrise: Date,\n  ) {\n    const a = 75 + (28.65 / 55.0) * Math.abs(latitude);\n    const b = 75 + (19.44 / 55.0) * Math.abs(latitude);\n    const c = 75 + (32.74 / 55.0) * Math.abs(latitude);\n    const d = 75 + (48.1 / 55.0) * Math.abs(latitude);\n\n    const adjustment = (function () {\n      const dyy = Astronomical.daysSinceSolstice(dayOfYear, year, latitude);\n      if (dyy < 91) {\n        return a + ((b - a) / 91.0) * dyy;\n      } else if (dyy < 137) {\n        return b + ((c - b) / 46.0) * (dyy - 91);\n      } else if (dyy < 183) {\n        return c + ((d - c) / 46.0) * (dyy - 137);\n      } else if (dyy < 229) {\n        return d + ((c - d) / 46.0) * (dyy - 183);\n      } else if (dyy < 275) {\n        return c + ((b - c) / 46.0) * (dyy - 229);\n      } else {\n        return b + ((a - b) / 91.0) * (dyy - 275);\n      }\n    })();\n\n    return dateByAddingSeconds(sunrise, Math.round(adjustment * -60.0));\n  },\n\n  seasonAdjustedEveningTwilight(\n    latitude: number,\n    dayOfYear: number,\n    year: number,\n    sunset: Date,\n    shafaq: ValueOf<typeof Shafaq>,\n  ) {\n    let a, b, c, d;\n    if (shafaq === Shafaq.Ahmer) {\n      a = 62 + (17.4 / 55.0) * Math.abs(latitude);\n      b = 62 - (7.16 / 55.0) * Math.abs(latitude);\n      c = 62 + (5.12 / 55.0) * Math.abs(latitude);\n      d = 62 + (19.44 / 55.0) * Math.abs(latitude);\n    } else if (shafaq === Shafaq.Abyad) {\n      a = 75 + (25.6 / 55.0) * Math.abs(latitude);\n      b = 75 + (7.16 / 55.0) * Math.abs(latitude);\n      c = 75 + (36.84 / 55.0) * Math.abs(latitude);\n      d = 75 + (81.84 / 55.0) * Math.abs(latitude);\n    } else {\n      a = 75 + (25.6 / 55.0) * Math.abs(latitude);\n      b = 75 + (2.05 / 55.0) * Math.abs(latitude);\n      c = 75 - (9.21 / 55.0) * Math.abs(latitude);\n      d = 75 + (6.14 / 55.0) * Math.abs(latitude);\n    }\n\n    const adjustment = (function () {\n      const dyy = Astronomical.daysSinceSolstice(dayOfYear, year, latitude);\n      if (dyy < 91) {\n        return a + ((b - a) / 91.0) * dyy;\n      } else if (dyy < 137) {\n        return b + ((c - b) / 46.0) * (dyy - 91);\n      } else if (dyy < 183) {\n        return c + ((d - c) / 46.0) * (dyy - 137);\n      } else if (dyy < 229) {\n        return d + ((c - d) / 46.0) * (dyy - 183);\n      } else if (dyy < 275) {\n        return c + ((b - c) / 46.0) * (dyy - 229);\n      } else {\n        return b + ((a - b) / 91.0) * (dyy - 275);\n      }\n    })();\n\n    return dateByAddingSeconds(sunset, Math.round(adjustment * 60.0));\n  },\n\n  daysSinceSolstice(dayOfYear: number, year: number, latitude: number) {\n    let daysSinceSolstice = 0;\n    const northernOffset = 10;\n    const southernOffset = Astronomical.isLeapYear(year) ? 173 : 172;\n    const daysInYear = Astronomical.isLeapYear(year) ? 366 : 365;\n\n    if (latitude >= 0) {\n      daysSinceSolstice = dayOfYear + northernOffset;\n      if (daysSinceSolstice >= daysInYear) {\n        daysSinceSolstice = daysSinceSolstice - daysInYear;\n      }\n    } else {\n      daysSinceSolstice = dayOfYear - southernOffset;\n      if (daysSinceSolstice < 0) {\n        daysSinceSolstice = daysSinceSolstice + daysInYear;\n      }\n    }\n\n    return daysSinceSolstice;\n  },\n};\n\nexport default Astronomical;\n","import Astronomical from './Astronomical';\nimport { degreesToRadians, radiansToDegrees, unwindAngle } from './MathUtils';\n\nexport default class SolarCoordinates {\n  declination: number;\n  rightAscension: number;\n  apparentSiderealTime: number;\n\n  constructor(julianDay: number) {\n    const T = Astronomical.julianCentury(julianDay);\n    const L0 = Astronomical.meanSolarLongitude(T);\n    const Lp = Astronomical.meanLunarLongitude(T);\n    const Omega = Astronomical.ascendingLunarNodeLongitude(T);\n    const Lambda = degreesToRadians(Astronomical.apparentSolarLongitude(T, L0));\n    const Theta0 = Astronomical.meanSiderealTime(T);\n    const dPsi = Astronomical.nutationInLongitude(T, L0, Lp, Omega);\n    const dEpsilon = Astronomical.nutationInObliquity(T, L0, Lp, Omega);\n    const Epsilon0 = Astronomical.meanObliquityOfTheEcliptic(T);\n    const EpsilonApparent = degreesToRadians(\n      Astronomical.apparentObliquityOfTheEcliptic(T, Epsilon0),\n    );\n\n    /* declination: The declination of the sun, the angle between\n            the rays of the Sun and the plane of the Earth's\n            equator, in degrees.\n            Equation from Astronomical Algorithms page 165 */\n    this.declination = radiansToDegrees(\n      Math.asin(Math.sin(EpsilonApparent) * Math.sin(Lambda)),\n    );\n\n    /* rightAscension: Right ascension of the Sun, the angular distance on the\n            celestial equator from the vernal equinox to the hour circle,\n            in degrees.\n            Equation from Astronomical Algorithms page 165 */\n    this.rightAscension = unwindAngle(\n      radiansToDegrees(\n        Math.atan2(\n          Math.cos(EpsilonApparent) * Math.sin(Lambda),\n          Math.cos(Lambda),\n        ),\n      ),\n    );\n\n    /* apparentSiderealTime: Apparent sidereal time, the hour angle of the vernal\n            equinox, in degrees.\n            Equation from Astronomical Algorithms page 88 */\n    this.apparentSiderealTime =\n      Theta0 +\n      (dPsi * 3600 * Math.cos(degreesToRadians(Epsilon0 + dEpsilon))) / 3600;\n  }\n}\n","import Astronomical from './Astronomical';\nimport type Coordinates from './Coordinates';\nimport { degreesToRadians, radiansToDegrees } from './MathUtils';\nimport SolarCoordinates from './SolarCoordinates';\n\nexport default class SolarTime {\n  observer: Coordinates;\n  solar: SolarCoordinates;\n  prevSolar: SolarCoordinates;\n  nextSolar: SolarCoordinates;\n  approxTransit: number;\n  transit: number;\n  sunrise: number;\n  sunset: number;\n\n  constructor(date: Date, coordinates: Coordinates) {\n    const julianDay = Astronomical.julianDay(\n      date.getFullYear(),\n      date.getMonth() + 1,\n      date.getDate(),\n      0,\n    );\n\n    this.observer = coordinates;\n    this.solar = new SolarCoordinates(julianDay);\n\n    this.prevSolar = new SolarCoordinates(julianDay - 1);\n    this.nextSolar = new SolarCoordinates(julianDay + 1);\n\n    const m0 = Astronomical.approximateTransit(\n      coordinates.longitude,\n      this.solar.apparentSiderealTime,\n      this.solar.rightAscension,\n    );\n    const solarAltitude = -50.0 / 60.0;\n\n    this.approxTransit = m0;\n\n    this.transit = Astronomical.correctedTransit(\n      m0,\n      coordinates.longitude,\n      this.solar.apparentSiderealTime,\n      this.solar.rightAscension,\n      this.prevSolar.rightAscension,\n      this.nextSolar.rightAscension,\n    );\n\n    this.sunrise = Astronomical.correctedHourAngle(\n      m0,\n      solarAltitude,\n      coordinates,\n      false,\n      this.solar.apparentSiderealTime,\n      this.solar.rightAscension,\n      this.prevSolar.rightAscension,\n      this.nextSolar.rightAscension,\n      this.solar.declination,\n      this.prevSolar.declination,\n      this.nextSolar.declination,\n    );\n\n    this.sunset = Astronomical.correctedHourAngle(\n      m0,\n      solarAltitude,\n      coordinates,\n      true,\n      this.solar.apparentSiderealTime,\n      this.solar.rightAscension,\n      this.prevSolar.rightAscension,\n      this.nextSolar.rightAscension,\n      this.solar.declination,\n      this.prevSolar.declination,\n      this.nextSolar.declination,\n    );\n  }\n\n  hourAngle(angle: number, afterTransit: boolean) {\n    return Astronomical.correctedHourAngle(\n      this.approxTransit,\n      angle,\n      this.observer,\n      afterTransit,\n      this.solar.apparentSiderealTime,\n      this.solar.rightAscension,\n      this.prevSolar.rightAscension,\n      this.nextSolar.rightAscension,\n      this.solar.declination,\n      this.prevSolar.declination,\n      this.nextSolar.declination,\n    );\n  }\n\n  afternoon(shadowLength: number) {\n    // TODO source shadow angle calculation\n    const tangent = Math.abs(this.observer.latitude - this.solar.declination);\n    const inverse = shadowLength + Math.tan(degreesToRadians(tangent));\n    const angle = radiansToDegrees(Math.atan(1.0 / inverse));\n    return this.hourAngle(angle, true);\n  }\n}\n","import Coordinates from './Coordinates';\nimport SolarTime from './SolarTime';\nimport { dateByAddingDays } from './DateUtils';\nimport { ValueOf } from './TypeUtils';\n\nexport const PolarCircleResolution = {\n  AqrabBalad: 'AqrabBalad',\n  AqrabYaum: 'AqrabYaum',\n  Unresolved: 'Unresolved',\n} as const;\n\nconst LATITUDE_VARIATION_STEP = 0.5; // Degrees to add/remove at each resolution step\nconst UNSAFE_LATITUDE = 65; // Based on https://en.wikipedia.org/wiki/Midnight_sun\n\nconst isValidSolarTime = (solarTime: SolarTime) =>\n  !isNaN(solarTime.sunrise) && !isNaN(solarTime.sunset);\n\nconst aqrabYaumResolver = (\n  coordinates: Coordinates,\n  date: Date,\n  daysAdded = 1,\n  direction = 1,\n): {\n  date: Date;\n  tomorrow: Date;\n  coordinates: Coordinates;\n  solarTime: SolarTime;\n  tomorrowSolarTime: SolarTime;\n} | null => {\n  if (daysAdded > Math.ceil(365 / 2)) {\n    return null;\n  }\n  const testDate = new Date(date.getTime());\n  testDate.setDate(testDate.getDate() + direction * daysAdded);\n  const tomorrow = dateByAddingDays(testDate, 1);\n  const solarTime = new SolarTime(testDate, coordinates);\n  const tomorrowSolarTime = new SolarTime(tomorrow, coordinates);\n\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return aqrabYaumResolver(\n      coordinates,\n      date,\n      daysAdded + (direction > 0 ? 0 : 1),\n      -direction,\n    );\n  }\n\n  return {\n    date,\n    tomorrow,\n    coordinates,\n    solarTime,\n    tomorrowSolarTime,\n  };\n};\n\nconst aqrabBaladResolver = (\n  coordinates: Coordinates,\n  date: Date,\n  latitude: number,\n): {\n  date: Date;\n  tomorrow: Date;\n  coordinates: Coordinates;\n  solarTime: SolarTime;\n  tomorrowSolarTime: SolarTime;\n} | null => {\n  const solarTime = new SolarTime(date, { ...coordinates, latitude });\n  const tomorrow = dateByAddingDays(date, 1);\n  const tomorrowSolarTime = new SolarTime(tomorrow, {\n    ...coordinates,\n    latitude,\n  });\n  if (!isValidSolarTime(solarTime) || !isValidSolarTime(tomorrowSolarTime)) {\n    return Math.abs(latitude) >= UNSAFE_LATITUDE\n      ? aqrabBaladResolver(\n          coordinates,\n          date,\n          latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP,\n        )\n      : null;\n  }\n\n  return {\n    date,\n    tomorrow,\n    coordinates: new Coordinates(latitude, coordinates.longitude),\n    solarTime,\n    tomorrowSolarTime,\n  };\n};\n\nexport const polarCircleResolvedValues = (\n  resolver: ValueOf<typeof PolarCircleResolution>,\n  date: Date,\n  coordinates: Coordinates,\n) => {\n  const defaultReturn = {\n    date,\n    tomorrow: dateByAddingDays(date, 1),\n    coordinates,\n    solarTime: new SolarTime(date, coordinates),\n    tomorrowSolarTime: new SolarTime(dateByAddingDays(date, 1), coordinates),\n  };\n\n  switch (resolver) {\n    case PolarCircleResolution.AqrabYaum: {\n      return aqrabYaumResolver(coordinates, date) || defaultReturn;\n    }\n    case PolarCircleResolution.AqrabBalad: {\n      const { latitude } = coordinates;\n      return (\n        aqrabBaladResolver(\n          coordinates,\n          date,\n          latitude - Math.sign(latitude) * LATITUDE_VARIATION_STEP,\n        ) || defaultReturn\n      );\n    }\n    default: {\n      return defaultReturn;\n    }\n  }\n};\n","import type CalculationMethod from './CalculationMethod';\nimport { Madhab } from './Madhab';\nimport HighLatitudeRule from './HighLatitudeRule';\nimport { PolarCircleResolution } from './PolarCircleResolution';\nimport { Rounding } from './Rounding';\nimport { Shafaq } from './Shafaq';\nimport { ValueOf } from './TypeUtils';\n\nexport default class CalculationParameters {\n  // Madhab to determine how Asr is calculated.\n  madhab: ValueOf<typeof Madhab> = Madhab.Shafi;\n\n  // Rule to determine the earliest time for Fajr and latest time for Isha\n  // needed for high latitude locations where Fajr and Isha may not truly exist\n  // or may present a hardship unless bound to a reasonable time.\n  highLatitudeRule: ValueOf<typeof HighLatitudeRule> =\n    HighLatitudeRule.MiddleOfTheNight;\n\n  // Manual adjustments (in minutes) to be added to each prayer time.\n  adjustments = {\n    fajr: 0,\n    sunrise: 0,\n    dhuhr: 0,\n    asr: 0,\n    maghrib: 0,\n    isha: 0,\n  };\n\n  // Adjustments set by a calculation method. This value should not be manually modified.\n  methodAdjustments = {\n    fajr: 0,\n    sunrise: 0,\n    dhuhr: 0,\n    asr: 0,\n    maghrib: 0,\n    isha: 0,\n  };\n\n  // Rule to determine how to resolve prayer times inside the Polar Circle\n  // where daylight or night may persist for more than 24 hours depending\n  // on the season\n  polarCircleResolution: ValueOf<typeof PolarCircleResolution> =\n    PolarCircleResolution.Unresolved;\n\n  // How seconds are rounded when calculating prayer times\n  rounding: ValueOf<typeof Rounding> = Rounding.Nearest;\n\n  // Used by the MoonsightingCommittee method to determine how to calculate Isha\n  shafaq: ValueOf<typeof Shafaq> = Shafaq.General;\n\n  constructor(\n    // Name of the method, can be used to apply special behavior in calculations.\n    // This property should not be manually modified.\n    public method: null | keyof typeof CalculationMethod,\n    // Angle of the sun below the horizon used for calculating Fajr.\n    public fajrAngle = 0,\n    // Angle of the sun below the horizon used for calculating Isha.\n    public ishaAngle = 0,\n    // Minutes after Maghrib to determine time for Isha\n    // if this value is greater than 0 then ishaAngle is not used.\n    public ishaInterval = 0,\n    // Angle of the sun below the horizon used for calculating Maghrib.\n    // Only used by the Tehran method to account for lightness in the sky.\n    public maghribAngle = 0,\n  ) {\n    if (this.method === null) {\n      // we don't want a breaking change\n      this.method = 'Other';\n    }\n  }\n\n  nightPortions() {\n    switch (this.highLatitudeRule) {\n      case HighLatitudeRule.MiddleOfTheNight:\n        return { fajr: 1 / 2, isha: 1 / 2 };\n      case HighLatitudeRule.SeventhOfTheNight:\n        return { fajr: 1 / 7, isha: 1 / 7 };\n      case HighLatitudeRule.TwilightAngle:\n        return { fajr: this.fajrAngle / 60, isha: this.ishaAngle / 60 };\n      default:\n        throw `Invalid high latitude rule found when attempting to compute night portions: ${this.highLatitudeRule}`;\n    }\n  }\n}\n","import CalculationParameters from './CalculationParameters';\nimport { Rounding } from './Rounding';\n\nconst CalculationMethod = {\n  // Muslim World League\n  MuslimWorldLeague() {\n    const params = new CalculationParameters('MuslimWorldLeague', 18, 17);\n    params.methodAdjustments.dhuhr = 1;\n    return params;\n  },\n\n  // Egyptian General Authority of Survey\n  Egyptian() {\n    const params = new CalculationParameters('Egyptian', 19.5, 17.5);\n    params.methodAdjustments.dhuhr = 1;\n    return params;\n  },\n\n  // University of Islamic Sciences, Karachi\n  Karachi() {\n    const params = new CalculationParameters('Karachi', 18, 18);\n    params.methodAdjustments.dhuhr = 1;\n    return params;\n  },\n\n  // Umm al-Qura University, Makkah\n  UmmAlQura() {\n    return new CalculationParameters('UmmAlQura', 18.5, 0, 90);\n  },\n\n  // Dubai\n  Dubai() {\n    const params = new CalculationParameters('Dubai', 18.2, 18.2);\n    params.methodAdjustments = {\n      ...params.methodAdjustments,\n      sunrise: -3,\n      dhuhr: 3,\n      asr: 3,\n      maghrib: 3,\n    };\n    return params;\n  },\n\n  // Moonsighting Committee\n  MoonsightingCommittee() {\n    const params = new CalculationParameters('MoonsightingCommittee', 18, 18);\n    params.methodAdjustments = {\n      ...params.methodAdjustments,\n      dhuhr: 5,\n      maghrib: 3,\n    };\n\n    return params;\n  },\n\n  // ISNA\n  NorthAmerica() {\n    const params = new CalculationParameters('NorthAmerica', 15, 15);\n    params.methodAdjustments.dhuhr = 1;\n    return params;\n  },\n\n  // Kuwait\n  Kuwait() {\n    return new CalculationParameters('Kuwait', 18, 17.5);\n  },\n\n  // Qatar\n  Qatar() {\n    return new CalculationParameters('Qatar', 18, 0, 90);\n  },\n\n  // Singapore\n  Singapore() {\n    const params = new CalculationParameters('Singapore', 20, 18);\n    params.methodAdjustments.dhuhr = 1;\n    params.rounding = Rounding.Up;\n    return params;\n  },\n\n  // Institute of Geophysics, University of Tehran\n  Tehran() {\n    const params = new CalculationParameters('Tehran', 17.7, 14, 0, 4.5);\n    return params;\n  },\n\n  // Dianet\n  Turkey() {\n    const params = new CalculationParameters('Turkey', 18, 17);\n    params.methodAdjustments = {\n      ...params.methodAdjustments,\n      sunrise: -7,\n      dhuhr: 5,\n      asr: 4,\n      maghrib: 7,\n    };\n    return params;\n  },\n\n  // Other\n  Other() {\n    return new CalculationParameters('Other', 0, 0);\n  },\n} as const;\n\nexport default CalculationMethod;\n","const Prayer = {\n  Fajr: 'fajr',\n  Sunrise: 'sunrise',\n  Dhuhr: 'dhuhr',\n  Asr: 'asr',\n  Maghrib: 'maghrib',\n  Isha: 'isha',\n  None: 'none',\n} as const;\n\nexport default Prayer;\n","export default class TimeComponents {\n  hours: number;\n  minutes: number;\n  seconds: number;\n\n  constructor(num: number) {\n    this.hours = Math.floor(num);\n    this.minutes = Math.floor((num - this.hours) * 60);\n    this.seconds = Math.floor(\n      (num - (this.hours + this.minutes / 60)) * 60 * 60,\n    );\n    return this;\n  }\n\n  utcDate(year: number, month: number, date: number): Date {\n    return new Date(\n      Date.UTC(year, month, date, this.hours, this.minutes, this.seconds),\n    );\n  }\n}\n","import SolarTime from './SolarTime';\nimport TimeComponents from './TimeComponents';\nimport Prayer from './Prayer';\nimport Astronomical from './Astronomical';\nimport CalculationParameters from './CalculationParameters';\nimport Coordinates from './Coordinates';\nimport {\n  dateByAddingDays,\n  dateByAddingMinutes,\n  dateByAddingSeconds,\n  dayOfYear,\n  isValidDate,\n  roundedMinute,\n} from './DateUtils';\nimport { shadowLength } from './Madhab';\nimport {\n  PolarCircleResolution,\n  polarCircleResolvedValues,\n} from './PolarCircleResolution';\nimport { ValueOf } from './TypeUtils';\n\nexport default class PrayerTimes {\n  fajr: Date;\n  sunrise: Date;\n  dhuhr: Date;\n  asr: Date;\n  sunset: Date;\n  maghrib: Date;\n  isha: Date;\n\n  // eslint-disable-next-line complexity\n  constructor(\n    public coordinates: Coordinates,\n    public date: Date,\n    public calculationParameters: CalculationParameters,\n  ) {\n    let solarTime = new SolarTime(date, coordinates);\n\n    let fajrTime: Date;\n    let sunriseTime: Date;\n    let dhuhrTime: Date;\n    let asrTime: Date;\n    let sunsetTime: Date;\n    let maghribTime: Date;\n    let ishaTime: Date;\n\n    let nightFraction;\n\n    dhuhrTime = new TimeComponents(solarTime.transit).utcDate(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate(),\n    );\n    sunriseTime = new TimeComponents(solarTime.sunrise).utcDate(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate(),\n    );\n    sunsetTime = new TimeComponents(solarTime.sunset).utcDate(\n      date.getFullYear(),\n      date.getMonth(),\n      date.getDate(),\n    );\n    const tomorrow = dateByAddingDays(date, 1);\n    let tomorrowSolarTime = new SolarTime(tomorrow, coordinates);\n\n    const polarCircleResolver = calculationParameters.polarCircleResolution;\n    if (\n      (!isValidDate(sunriseTime) ||\n        !isValidDate(sunsetTime) ||\n        isNaN(tomorrowSolarTime.sunrise)) &&\n      polarCircleResolver !== PolarCircleResolution.Unresolved\n    ) {\n      const resolved = polarCircleResolvedValues(\n        polarCircleResolver,\n        date,\n        coordinates,\n      );\n      solarTime = resolved.solarTime;\n      tomorrowSolarTime = resolved.tomorrowSolarTime;\n      const dateComponents = [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n      ] as const;\n\n      dhuhrTime = new TimeComponents(solarTime.transit).utcDate(\n        ...dateComponents,\n      );\n      sunriseTime = new TimeComponents(solarTime.sunrise).utcDate(\n        ...dateComponents,\n      );\n      sunsetTime = new TimeComponents(solarTime.sunset).utcDate(\n        ...dateComponents,\n      );\n    }\n\n    // eslint-disable-next-line prefer-const\n    asrTime = new TimeComponents(\n      solarTime.afternoon(shadowLength(calculationParameters.madhab)),\n    ).utcDate(date.getFullYear(), date.getMonth(), date.getDate());\n\n    const tomorrowSunrise = new TimeComponents(\n      tomorrowSolarTime.sunrise,\n    ).utcDate(tomorrow.getFullYear(), tomorrow.getMonth(), tomorrow.getDate());\n    const night = (Number(tomorrowSunrise) - Number(sunsetTime)) / 1000;\n\n    fajrTime = new TimeComponents(\n      solarTime.hourAngle(-1 * calculationParameters.fajrAngle, false),\n    ).utcDate(date.getFullYear(), date.getMonth(), date.getDate());\n\n    // special case for moonsighting committee above latitude 55\n    if (\n      calculationParameters.method === 'MoonsightingCommittee' &&\n      coordinates.latitude >= 55\n    ) {\n      nightFraction = night / 7;\n      fajrTime = dateByAddingSeconds(sunriseTime, -nightFraction);\n    }\n\n    const safeFajr = (function () {\n      if (calculationParameters.method === 'MoonsightingCommittee') {\n        return Astronomical.seasonAdjustedMorningTwilight(\n          coordinates.latitude,\n          dayOfYear(date),\n          date.getFullYear(),\n          sunriseTime,\n        );\n      } else {\n        const portion = calculationParameters.nightPortions().fajr;\n        nightFraction = portion * night;\n        return dateByAddingSeconds(sunriseTime, -nightFraction);\n      }\n    })();\n\n    if (isNaN(fajrTime.getTime()) || safeFajr > fajrTime) {\n      fajrTime = safeFajr;\n    }\n\n    if (calculationParameters.ishaInterval > 0) {\n      ishaTime = dateByAddingMinutes(\n        sunsetTime,\n        calculationParameters.ishaInterval,\n      );\n    } else {\n      ishaTime = new TimeComponents(\n        solarTime.hourAngle(-1 * calculationParameters.ishaAngle, true),\n      ).utcDate(date.getFullYear(), date.getMonth(), date.getDate());\n\n      // special case for moonsighting committee above latitude 55\n      if (\n        calculationParameters.method === 'MoonsightingCommittee' &&\n        coordinates.latitude >= 55\n      ) {\n        nightFraction = night / 7;\n        ishaTime = dateByAddingSeconds(sunsetTime, nightFraction);\n      }\n\n      const safeIsha = (function () {\n        if (calculationParameters.method === 'MoonsightingCommittee') {\n          return Astronomical.seasonAdjustedEveningTwilight(\n            coordinates.latitude,\n            dayOfYear(date),\n            date.getFullYear(),\n            sunsetTime,\n            calculationParameters.shafaq,\n          );\n        } else {\n          const portion = calculationParameters.nightPortions().isha;\n          nightFraction = portion * night;\n          return dateByAddingSeconds(sunsetTime, nightFraction);\n        }\n      })();\n\n      if (isNaN(ishaTime.getTime()) || safeIsha < ishaTime) {\n        ishaTime = safeIsha;\n      }\n    }\n\n    maghribTime = sunsetTime;\n    if (calculationParameters.maghribAngle) {\n      const angleBasedMaghrib = new TimeComponents(\n        solarTime.hourAngle(-1 * calculationParameters.maghribAngle, true),\n      ).utcDate(date.getFullYear(), date.getMonth(), date.getDate());\n      if (sunsetTime < angleBasedMaghrib && ishaTime > angleBasedMaghrib) {\n        maghribTime = angleBasedMaghrib;\n      }\n    }\n\n    const fajrAdjustment =\n      (calculationParameters.adjustments.fajr || 0) +\n      (calculationParameters.methodAdjustments.fajr || 0);\n    const sunriseAdjustment =\n      (calculationParameters.adjustments.sunrise || 0) +\n      (calculationParameters.methodAdjustments.sunrise || 0);\n    const dhuhrAdjustment =\n      (calculationParameters.adjustments.dhuhr || 0) +\n      (calculationParameters.methodAdjustments.dhuhr || 0);\n    const asrAdjustment =\n      (calculationParameters.adjustments.asr || 0) +\n      (calculationParameters.methodAdjustments.asr || 0);\n    const maghribAdjustment =\n      (calculationParameters.adjustments.maghrib || 0) +\n      (calculationParameters.methodAdjustments.maghrib || 0);\n    const ishaAdjustment =\n      (calculationParameters.adjustments.isha || 0) +\n      (calculationParameters.methodAdjustments.isha || 0);\n\n    this.fajr = roundedMinute(\n      dateByAddingMinutes(fajrTime, fajrAdjustment),\n      calculationParameters.rounding,\n    );\n    this.sunrise = roundedMinute(\n      dateByAddingMinutes(sunriseTime, sunriseAdjustment),\n      calculationParameters.rounding,\n    );\n    this.dhuhr = roundedMinute(\n      dateByAddingMinutes(dhuhrTime, dhuhrAdjustment),\n      calculationParameters.rounding,\n    );\n    this.asr = roundedMinute(\n      dateByAddingMinutes(asrTime, asrAdjustment),\n      calculationParameters.rounding,\n    );\n    this.sunset = roundedMinute(sunsetTime, calculationParameters.rounding);\n    this.maghrib = roundedMinute(\n      dateByAddingMinutes(maghribTime, maghribAdjustment),\n      calculationParameters.rounding,\n    );\n    this.isha = roundedMinute(\n      dateByAddingMinutes(ishaTime, ishaAdjustment),\n      calculationParameters.rounding,\n    );\n  }\n\n  timeForPrayer(prayer: ValueOf<typeof Prayer>) {\n    if (prayer === Prayer.Fajr) {\n      return this.fajr;\n    } else if (prayer === Prayer.Sunrise) {\n      return this.sunrise;\n    } else if (prayer === Prayer.Dhuhr) {\n      return this.dhuhr;\n    } else if (prayer === Prayer.Asr) {\n      return this.asr;\n    } else if (prayer === Prayer.Maghrib) {\n      return this.maghrib;\n    } else if (prayer === Prayer.Isha) {\n      return this.isha;\n    } else {\n      return null;\n    }\n  }\n\n  currentPrayer(date = new Date()) {\n    if (date >= this.isha) {\n      return Prayer.Isha;\n    } else if (date >= this.maghrib) {\n      return Prayer.Maghrib;\n    } else if (date >= this.asr) {\n      return Prayer.Asr;\n    } else if (date >= this.dhuhr) {\n      return Prayer.Dhuhr;\n    } else if (date >= this.sunrise) {\n      return Prayer.Sunrise;\n    } else if (date >= this.fajr) {\n      return Prayer.Fajr;\n    } else {\n      return Prayer.None;\n    }\n  }\n\n  nextPrayer(date = new Date()) {\n    if (date >= this.isha) {\n      return Prayer.None;\n    } else if (date >= this.maghrib) {\n      return Prayer.Isha;\n    } else if (date >= this.asr) {\n      return Prayer.Maghrib;\n    } else if (date >= this.dhuhr) {\n      return Prayer.Asr;\n    } else if (date >= this.sunrise) {\n      return Prayer.Dhuhr;\n    } else if (date >= this.fajr) {\n      return Prayer.Sunrise;\n    } else {\n      return Prayer.Fajr;\n    }\n  }\n}\n","import {\n  dateByAddingDays,\n  dateByAddingSeconds,\n  roundedMinute,\n} from './DateUtils';\nimport PrayerTimes from './PrayerTimes';\n\nexport default class SunnahTimes {\n  middleOfTheNight: Date;\n  lastThirdOfTheNight: Date;\n\n  constructor(prayerTimes: PrayerTimes) {\n    const date = prayerTimes.date;\n    const nextDay = dateByAddingDays(date, 1);\n    const nextDayPrayerTimes = new PrayerTimes(\n      prayerTimes.coordinates,\n      nextDay,\n      prayerTimes.calculationParameters,\n    );\n\n    const nightDuration =\n      (nextDayPrayerTimes.fajr.getTime() - prayerTimes.maghrib.getTime()) /\n      1000.0;\n\n    this.middleOfTheNight = roundedMinute(\n      dateByAddingSeconds(prayerTimes.maghrib, nightDuration / 2),\n    );\n    this.lastThirdOfTheNight = roundedMinute(\n      dateByAddingSeconds(prayerTimes.maghrib, nightDuration * (2 / 3)),\n    );\n  }\n}\n","import Coordinates from './Coordinates';\nimport { degreesToRadians, radiansToDegrees, unwindAngle } from './MathUtils';\n\nexport default function qibla(coordinates: Coordinates) {\n  const makkah = new Coordinates(21.4225241, 39.8261818);\n\n  // Equation from \"Spherical Trigonometry For the use of colleges and schools\" page 50\n  const term1 = Math.sin(\n    degreesToRadians(makkah.longitude) -\n      degreesToRadians(coordinates.longitude),\n  );\n  const term2 =\n    Math.cos(degreesToRadians(coordinates.latitude)) *\n    Math.tan(degreesToRadians(makkah.latitude));\n  const term3 =\n    Math.sin(degreesToRadians(coordinates.latitude)) *\n    Math.cos(\n      degreesToRadians(makkah.longitude) -\n        degreesToRadians(coordinates.longitude),\n    );\n  const angle = Math.atan2(term1, term2 - term3);\n\n  return unwindAngle(radiansToDegrees(angle));\n}\n"],"names":["Madhab","Shafi","Hanafi","HighLatitudeRule","MiddleOfTheNight","SeventhOfTheNight","TwilightAngle","recommended","coordinates","latitude","Coordinates","_createClass","longitude","_classCallCheck","this","Rounding","Nearest","Up","None","dateByAddingDays","date","days","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","Date","dateByAddingMinutes","dateByAddingSeconds","getTime","roundedMinute","rounding","arguments","length","undefined","getUTCSeconds","offset","dayOfYear","returnedDayOfYear","months","Astronomical","isLeapYear","i","isValidDate","isNaN","valueOf","degreesToRadians","degrees","Math","PI","radiansToDegrees","radians","normalizeToScale","num","max","floor","unwindAngle","angle","Shafaq","General","Ahmer","Abyad","meanSolarLongitude","julianCentury","T","pow","meanLunarLongitude","ascendingLunarNodeLongitude","meanSolarAnomaly","solarEquationOfTheCenter","meanAnomaly","Mrad","sin","apparentSolarLongitude","meanLongitude","Omega","meanObliquityOfTheEcliptic","apparentObliquityOfTheEcliptic","O","cos","meanSiderealTime","nutationInLongitude","solarLongitude","lunarLongitude","ascendingNode","L0","Lp","nutationInObliquity","altitudeOfCelestialBody","observerLatitude","declination","localHourAngle","Phi","delta","H","term1","term2","asin","approximateTransit","siderealTime","rightAscension","correctedTransit","previousRightAscension","nextRightAscension","m0","a2","a1","a3","Lw","Theta","a","interpolateAngles","round","correctedHourAngle","afterTransit","previousDeclination","nextDeclination","h0","Theta0","d2","d1","d3","H0","acos","m","interpolate","y2","y1","y3","n","b","julianDay","trunc","Y","M","D","A","B","i0","i1","seasonAdjustedMorningTwilight","sunrise","dyy","abs","c","d","adjustment","daysSinceSolstice","seasonAdjustedEveningTwilight","sunset","shafaq","southernOffset","daysInYear","SolarCoordinates","Lambda","dPsi","dEpsilon","Epsilon0","EpsilonApparent","atan2","apparentSiderealTime","SolarTime","observer","solar","prevSolar","nextSolar","solarAltitude","approxTransit","transit","value","shadowLength","tangent","inverse","tan","atan","hourAngle","PolarCircleResolution","AqrabBalad","AqrabYaum","Unresolved","isValidSolarTime","solarTime","aqrabYaumResolver","daysAdded","direction","ceil","testDate","setDate","tomorrow","tomorrowSolarTime","aqrabBaladResolver","sign","polarCircleResolvedValues","resolver","defaultReturn","CalculationParameters","method","fajrAngle","ishaAngle","ishaInterval","maghribAngle","_defineProperty","fajr","dhuhr","asr","maghrib","isha","highLatitudeRule","concat","CalculationMethod","MuslimWorldLeague","params","methodAdjustments","Egyptian","Karachi","UmmAlQura","Dubai","MoonsightingCommittee","NorthAmerica","Kuwait","Qatar","Singapore","Tehran","Turkey","Other","Prayer","Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha","TimeComponents","UTC","PrayerTimes","calculationParameters","fajrTime","sunriseTime","dhuhrTime","asrTime","sunsetTime","maghribTime","ishaTime","utcDate","polarCircleResolver","polarCircleResolution","_TimeComponents","_TimeComponents2","_TimeComponents3","resolved","dateComponents","afternoon","madhab","tomorrowSunrise","night","Number","safeFajr","portion","nightPortions","safeIsha","angleBasedMaghrib","fajrAdjustment","adjustments","sunriseAdjustment","dhuhrAdjustment","asrAdjustment","maghribAdjustment","ishaAdjustment","prayer","SunnahTimes","prayerTimes","nextDay","nightDuration","middleOfTheNight","lastThirdOfTheNight","makkah","term3"],"mappings":"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"}